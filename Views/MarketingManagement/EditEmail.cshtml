@model JohnHenryFashionWeb.Models.EmailCampaign
@{
    ViewData["Title"] = "Edit Email Campaign";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<style>
    .marketing-container {
        padding: 2rem;
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        min-height: calc(100vh - 80px);
    }

    .form-card {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(15px);
        border-radius: 20px;
        padding: 2.5rem;
        max-width: 900px;
        margin: 0 auto;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    }

    .form-control, .form-select { border-radius: 10px; padding: 0.75rem; }
    .btn-submit { background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; border: none; padding: 0.75rem 2rem; border-radius: 10px; }
</style>

<div class="marketing-container">
    <div class="form-card">
        <h2 class="mb-4">✏️ Edit Email Campaign</h2>
        
        <form method="post" action="/admin/marketing/email/@Model.Id">
            @Html.AntiForgeryToken()
            
            <div class="mb-3">
                <label class="form-label">Campaign Name *</label>
                <input type="text" class="form-control" name="Name" value="@Model.Name" required />
            </div>

            <div class="mb-3">
                <label class="form-label">Email Subject *</label>
                <input type="text" class="form-control" name="Subject" value="@Model.Subject" required />
            </div>

            <div class="mb-3">
                <label class="form-label">HTML Content *</label>
                <textarea class="form-control" name="HtmlContent" rows="8" required>@Model.HtmlContent</textarea>
            </div>

            <div class="mb-3">
                <label class="form-label">Plain Text Content</label>
                <textarea class="form-control" name="PlainTextContent" rows="5">@Model.PlainTextContent</textarea>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Target Audience</label>
                    <select class="form-select" name="TargetAudience">
                        <option value="all" selected="@(Model.TargetAudience == "all")">All Users</option>
                        <option value="customers" selected="@(Model.TargetAudience == "customers")">Customers Only</option>
                        <option value="subscribers" selected="@(Model.TargetAudience == "subscribers")">Subscribers</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Status</label>
                    <select class="form-select" name="Status">
                        <option value="draft" selected="@(Model.Status == "draft")">Draft</option>
                        <option value="scheduled" selected="@(Model.Status == "scheduled")">Scheduled</option>
                        <option value="sent" selected="@(Model.Status == "sent")">Sent</option>
                    </select>
                </div>
            </div>

            <div class="mb-3">
                <label class="form-label">Scheduled Time</label>
                <input type="datetime-local" class="form-control" name="ScheduledAt" 
                       value="@(Model.ScheduledAt?.ToString("yyyy-MM-ddTHH:mm"))" />
            </div>

            <div class="mb-3">
                <label class="form-label">Target Segment Criteria (JSON)</label>
                <textarea class="form-control" name="TargetSegmentCriteria" rows="3">@Model.TargetSegmentCriteria</textarea>
            </div>

            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-submit">
                    <i class="fas fa-save"></i> Update Campaign
                </button>
                <a href="/admin/marketing/emails" class="btn btn-secondary">Cancel</a>
            </div>
        </form>

        <hr class="my-4" />
        
        <form method="post" action="/admin/marketing/email/@Model.Id/delete" onsubmit="return confirm('Delete this campaign?');">
            @Html.AntiForgeryToken()
            <button type="submit" class="btn btn-danger">
                <i class="fas fa-trash"></i> Delete Campaign
            </button>
        </form>
    </div>
</div>
