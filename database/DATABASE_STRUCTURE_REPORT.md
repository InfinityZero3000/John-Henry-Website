# BÃ¡o CÃ¡o Cáº¥u TrÃºc CÆ¡ Sá»Ÿ Dá»¯ Liá»‡u John Henry Fashion Web

## Tá»•ng Quan
CÆ¡ sá»Ÿ dá»¯ liá»‡u John Henry Fashion Web Ä‘Æ°á»£c thiáº¿t káº¿ Ä‘á»ƒ há»— trá»£ má»™t há»‡ thá»‘ng thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ hoÃ n chá»‰nh vá»›i cÃ¡c tÃ­nh nÄƒng quáº£n lÃ½ sáº£n pháº©m, Ä‘Æ¡n hÃ ng, ngÆ°á»i dÃ¹ng, thanh toÃ¡n vÃ  phÃ¢n tÃ­ch.

## PhÃ¢n Loáº¡i CÃ¡c Báº£ng Theo Chá»©c NÄƒng

### 1. ğŸ‘¤ Há»‡ Thá»‘ng NgÆ°á»i DÃ¹ng & XÃ¡c Thá»±c (User & Authentication)

#### Báº£ng ChÃ­nh:
- **AspNetUsers** â†’ **NgÆ°á»i DÃ¹ng ASP.NET Identity**
- **users** â†’ **NgÆ°á»i DÃ¹ng (Custom)**
- **AspNetRoles** â†’ **Vai TrÃ² Há»‡ Thá»‘ng**
- **AspNetUserRoles** â†’ **PhÃ¢n Quyá»n NgÆ°á»i DÃ¹ng**
- **AspNetUserClaims** â†’ **Quyá»n NgÆ°á»i DÃ¹ng**
- **AspNetRoleClaims** â†’ **Quyá»n Vai TrÃ²**
- **AspNetUserLogins** â†’ **ÄÄƒng Nháº­p NgoÃ i**
- **AspNetUserTokens** â†’ **Token NgÆ°á»i DÃ¹ng**

#### Báº£ng LiÃªn Quan:
- **Addresses** â†’ **Äá»‹a Chá»‰ Giao HÃ ng**
- **addresses** â†’ **Äá»‹a Chá»‰ (Custom)**
- **PasswordHistories** â†’ **Lá»‹ch Sá»­ Máº­t Kháº©u**
- **TwoFactorTokens** â†’ **Token XÃ¡c Thá»±c 2 BÆ°á»›c**

### 2. ğŸ” Báº£o Máº­t & PhiÃªn LÃ m Viá»‡c (Security & Sessions)

- **ActiveSessions** â†’ **PhiÃªn Äang Hoáº¡t Äá»™ng**
- **UserSessions** â†’ **PhiÃªn NgÆ°á»i DÃ¹ng**
- **SecurityLogs** â†’ **Nháº­t KÃ½ Báº£o Máº­t**
- **audit_logs** â†’ **Nháº­t KÃ½ Kiá»ƒm ToÃ¡n**

### 3. ğŸ›ï¸ Quáº£n LÃ½ Sáº£n Pháº©m (Product Management)

#### Báº£ng Sáº£n Pháº©m:
- **Products** â†’ **Sáº£n Pháº©m**
- **products** â†’ **Sáº£n Pháº©m (Custom)**
- **Categories** â†’ **Danh Má»¥c Sáº£n Pháº©m**
- **categories** â†’ **Danh Má»¥c (Custom)**
- **Brands** â†’ **ThÆ°Æ¡ng Hiá»‡u**
- **brands** â†’ **ThÆ°Æ¡ng Hiá»‡u (Custom)**

#### Báº£ng Thuá»™c TÃ­nh:
- **product_variants** â†’ **Biáº¿n Thá»ƒ Sáº£n Pháº©m**
- **product_attributes** â†’ **Thuá»™c TÃ­nh Sáº£n Pháº©m**
- **product_attribute_values** â†’ **GiÃ¡ Trá»‹ Thuá»™c TÃ­nh**
- **product_variant_attributes** â†’ **Thuá»™c TÃ­nh Biáº¿n Thá»ƒ**

#### Báº£ng HÃ¬nh áº¢nh & ÄÃ¡nh GiÃ¡:
- **ProductImages** â†’ **HÃ¬nh áº¢nh Sáº£n Pháº©m**
- **product_images** â†’ **HÃ¬nh áº¢nh (Custom)**
- **ProductReviews** â†’ **ÄÃ¡nh GiÃ¡ Sáº£n Pháº©m**
- **product_reviews** â†’ **ÄÃ¡nh GiÃ¡ (Custom)**
- **review_helpful_votes** â†’ **BÃ¬nh Chá»n ÄÃ¡nh GiÃ¡ Há»¯u Ãch**

### 4. ğŸ›’ Giá» HÃ ng & Mua Sáº¯m (Shopping Cart)

- **ShoppingCartItems** â†’ **Sáº£n Pháº©m Trong Giá»**
- **shopping_carts** â†’ **Giá» HÃ ng (Custom)**
- **Wishlists** â†’ **Danh SÃ¡ch YÃªu ThÃ­ch**
- **wishlists** â†’ **YÃªu ThÃ­ch (Custom)**

### 5. ğŸ“¦ Quáº£n LÃ½ ÄÆ¡n HÃ ng (Order Management)

#### Báº£ng ÄÆ¡n HÃ ng:
- **Orders** â†’ **ÄÆ¡n HÃ ng**
- **orders** â†’ **ÄÆ¡n HÃ ng (Custom)**
- **OrderItems** â†’ **Chi Tiáº¿t ÄÆ¡n HÃ ng**
- **order_items** â†’ **Chi Tiáº¿t (Custom)**
- **OrderStatusHistories** â†’ **Lá»‹ch Sá»­ Tráº¡ng ThÃ¡i**
- **order_status_history** â†’ **Lá»‹ch Sá»­ (Custom)**

#### Báº£ng Thanh ToÃ¡n:
- **CheckoutSessions** â†’ **PhiÃªn Thanh ToÃ¡n**
- **CheckoutSessionItems** â†’ **Sáº£n Pháº©m Thanh ToÃ¡n**

### 6. ğŸ’³ Há»‡ Thá»‘ng Thanh ToÃ¡n (Payment System)

- **Payments** â†’ **Thanh ToÃ¡n**
- **PaymentMethods** â†’ **PhÆ°Æ¡ng Thá»©c Thanh ToÃ¡n**
- **PaymentAttempts** â†’ **Láº§n Thá»­ Thanh ToÃ¡n**
- **RefundRequests** â†’ **YÃªu Cáº§u HoÃ n Tiá»n**

### 7. ğŸšš Váº­n Chuyá»ƒn & Kho HÃ ng (Shipping & Inventory)

- **ShippingMethods** â†’ **PhÆ°Æ¡ng Thá»©c Giao HÃ ng**
- **InventoryItems** â†’ **Kho HÃ ng**
- **StockMovements** â†’ **Biáº¿n Äá»™ng Kho**

### 8. ğŸ« Khuyáº¿n MÃ£i & Giáº£m GiÃ¡ (Promotions & Coupons)

- **Coupons** â†’ **Phiáº¿u Giáº£m GiÃ¡**
- **coupons** â†’ **Giáº£m GiÃ¡ (Custom)**
- **coupon_usages** â†’ **Lá»‹ch Sá»­ Sá»­ Dá»¥ng Coupon**
- **Promotions** â†’ **ChÆ°Æ¡ng TrÃ¬nh Khuyáº¿n MÃ£i**

### 9. ğŸ“ Blog & Ná»™i Dung (Blog & Content)

- **BlogPosts** â†’ **BÃ i Viáº¿t Blog**
- **blog_posts** â†’ **BÃ i Viáº¿t (Custom)**
- **BlogCategories** â†’ **Danh Má»¥c Blog**
- **blog_categories** â†’ **Danh Má»¥c (Custom)**

### 10. ğŸ“ LiÃªn Há»‡ & ThÃ´ng BÃ¡o (Contact & Notifications)

- **ContactMessages** â†’ **Tin Nháº¯n LiÃªn Há»‡**
- **Notifications** â†’ **ThÃ´ng BÃ¡o**
- **email_templates** â†’ **Máº«u Email**

### 11. ğŸ“Š PhÃ¢n TÃ­ch & BÃ¡o CÃ¡o (Analytics & Reports)

- **AnalyticsData** â†’ **Dá»¯ Liá»‡u PhÃ¢n TÃ­ch**
- **PageViews** â†’ **LÆ°á»£t Xem Trang**
- **ConversionEvents** â†’ **Sá»± Kiá»‡n Chuyá»ƒn Äá»•i**
- **SalesReports** â†’ **BÃ¡o CÃ¡o BÃ¡n HÃ ng**
- **ReportTemplates** â†’ **Máº«u BÃ¡o CÃ¡o**

### 12. âš™ï¸ Cáº¥u HÃ¬nh Há»‡ Thá»‘ng (System Configuration)

- **settings** â†’ **CÃ i Äáº·t Há»‡ Thá»‘ng**
- **__EFMigrationsHistory** â†’ **Lá»‹ch Sá»­ Migration Entity Framework**

## Má»‘i LiÃªn Há»‡ Giá»¯a CÃ¡c Báº£ng

### ğŸ”— LiÃªn Káº¿t ChÃ­nh

#### 1. NgÆ°á»i DÃ¹ng (User Relationships)
```
AspNetUsers â”€â”€â”¬â”€â”€ Orders (nhiá»u Ä‘Æ¡n hÃ ng)
              â”œâ”€â”€ ShoppingCartItems (giá» hÃ ng)
              â”œâ”€â”€ Wishlists (yÃªu thÃ­ch)
              â”œâ”€â”€ ProductReviews (Ä‘Ã¡nh giÃ¡)
              â”œâ”€â”€ Addresses (Ä‘á»‹a chá»‰)
              â””â”€â”€ UserSessions (phiÃªn lÃ m viá»‡c)
```

#### 2. Sáº£n Pháº©m (Product Relationships)
```
Products â”€â”€â”¬â”€â”€ ProductImages (hÃ¬nh áº£nh)
           â”œâ”€â”€ ProductReviews (Ä‘Ã¡nh giÃ¡)
           â”œâ”€â”€ product_variants (biáº¿n thá»ƒ)
           â”œâ”€â”€ OrderItems (trong Ä‘Æ¡n hÃ ng)
           â”œâ”€â”€ ShoppingCartItems (trong giá»)
           â””â”€â”€ InventoryItems (kho hÃ ng)

Categories â”€â”€ Products (phÃ¢n loáº¡i)
Brands â”€â”€â”€ Products (thÆ°Æ¡ng hiá»‡u)
```

#### 3. ÄÆ¡n HÃ ng (Order Relationships)
```
Orders â”€â”€â”¬â”€â”€ OrderItems (chi tiáº¿t sáº£n pháº©m)
         â”œâ”€â”€ OrderStatusHistories (lá»‹ch sá»­ tráº¡ng thÃ¡i)
         â”œâ”€â”€ Payments (thanh toÃ¡n)
         â””â”€â”€ ShippingMethods (váº­n chuyá»ƒn)

OrderItems â”€â”€ Products (sáº£n pháº©m Ä‘Æ°á»£c Ä‘áº·t)
```

#### 4. Thanh ToÃ¡n (Payment Relationships)
```
Orders â”€â”€ Payments â”€â”€â”¬â”€â”€ PaymentMethods (phÆ°Æ¡ng thá»©c)
                     â”œâ”€â”€ PaymentAttempts (láº§n thá»­)
                     â””â”€â”€ RefundRequests (hoÃ n tiá»n)
```

## CÃ¡ch Hoáº¡t Äá»™ng Cá»§a Há»‡ Thá»‘ng

### ğŸ”„ Quy TrÃ¬nh Mua HÃ ng

1. **ÄÄƒng KÃ½/ÄÄƒng Nháº­p**
   - User táº¡o tÃ i khoáº£n trong `AspNetUsers`
   - ThÃ´ng tin bá»• sung lÆ°u trong `users`
   - Äá»‹a chá»‰ lÆ°u trong `Addresses`

2. **Duyá»‡t Sáº£n Pháº©m**
   - Sáº£n pháº©m hiá»ƒn thá»‹ tá»« `Products`
   - PhÃ¢n loáº¡i theo `Categories` vÃ  `Brands`
   - HÃ¬nh áº£nh tá»« `ProductImages`
   - ÄÃ¡nh giÃ¡ tá»« `ProductReviews`

3. **ThÃªm VÃ o Giá» HÃ ng**
   - LÆ°u trong `ShoppingCartItems`
   - Hoáº·c `Wishlists` (yÃªu thÃ­ch)

4. **Thanh ToÃ¡n**
   - Táº¡o `CheckoutSessions`
   - Chi tiáº¿t trong `CheckoutSessionItems`
   - Táº¡o `Orders` vÃ  `OrderItems`

5. **Xá»­ LÃ½ ÄÆ¡n HÃ ng**
   - Cáº­p nháº­t `OrderStatusHistories`
   - Xá»­ lÃ½ `Payments`
   - Cáº­p nháº­t `InventoryItems`
   - Ghi `StockMovements`

### ğŸ” Báº£o Máº­t & GiÃ¡m SÃ¡t

1. **XÃ¡c Thá»±c**
   - ASP.NET Identity system
   - Two-factor authentication (`TwoFactorTokens`)
   - Password history (`PasswordHistories`)

2. **PhiÃªn LÃ m Viá»‡c**
   - Track trong `ActiveSessions`
   - Log trong `UserSessions`

3. **Audit & Security**
   - Má»i hoáº¡t Ä‘á»™ng ghi vÃ o `audit_logs`
   - Security events trong `SecurityLogs`

### ğŸ“Š PhÃ¢n TÃ­ch & BÃ¡o CÃ¡o

1. **Thu Tháº­p Dá»¯ Liá»‡u**
   - Page views â†’ `PageViews`
   - User actions â†’ `ConversionEvents`
   - Sales data â†’ `AnalyticsData`

2. **BÃ¡o CÃ¡o**
   - Template trong `ReportTemplates`
   - Káº¿t quáº£ trong `SalesReports`

## Äáº·c Äiá»ƒm Thiáº¿t Káº¿

### âœ… Æ¯u Äiá»ƒm
- **Dual Structure**: CÃ³ cáº£ báº£ng ASP.NET Identity vÃ  custom tables
- **Comprehensive**: Bao phá»§ Ä‘áº§y Ä‘á»§ chá»©c nÄƒng e-commerce
- **Scalable**: Thiáº¿t káº¿ cÃ³ thá»ƒ má»Ÿ rá»™ng
- **Audit Trail**: Äáº§y Ä‘á»§ log vÃ  tracking
- **Security**: Nhiá»u lá»›p báº£o máº­t

### âš ï¸ LÆ°u Ã
- **Duplicate Tables**: Má»™t sá»‘ báº£ng cÃ³ 2 phiÃªn báº£n (Pascal vÃ  snake_case)
- **Complex Relations**: Nhiá»u má»‘i liÃªn há»‡ phá»©c táº¡p cáº§n quáº£n lÃ½
- **Data Consistency**: Cáº§n Ä‘áº£m báº£o Ä‘á»“ng bá»™ giá»¯a cÃ¡c báº£ng

## Káº¿t Luáº­n

CÆ¡ sá»Ÿ dá»¯ liá»‡u John Henry Fashion Web Ä‘Æ°á»£c thiáº¿t káº¿ hoÃ n chá»‰nh cho má»™t há»‡ thá»‘ng thÆ°Æ¡ng máº¡i Ä‘iá»‡n tá»­ quy mÃ´ lá»›n vá»›i Ä‘áº§y Ä‘á»§ tÃ­nh nÄƒng tá»« quáº£n lÃ½ sáº£n pháº©m, Ä‘Æ¡n hÃ ng, thanh toÃ¡n Ä‘áº¿n phÃ¢n tÃ­ch vÃ  báº£o máº­t.